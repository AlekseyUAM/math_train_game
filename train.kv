#:set BACKG_COLOR (0.894, 0.976, 0.961, 1)
#:set TEXT_COLOR (0.067, 0.6, 0.62, 1)
#:set BUTTON_COLOR (0.696, 0.945, 0.961, 1)

# Custom buttons
<CustButton@Button>:
    font_size: self.height/2
    background_color: BUTTON_COLOR
    background_normal: ''
    color: TEXT_COLOR
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            pos: self.pos
            size: self.size

<SetButton@Button>:
    font_size: self.height/2
    background_color: BUTTON_COLOR
    background_normal: ''
    color: TEXT_COLOR
    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            pos: self.pos
            size: self.size



<GameScreen>:
    CalcGridLayout:
        rows: 6
        padding: 10
        spacing: 10
        background_color: BACKG_COLOR
        canvas.before:
            Color:
                rgba: BACKG_COLOR
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            Label:
                id: answer_label
                font_size: self.height/2
                color: TEXT_COLOR
                canvas.before:
                    Color:
                        rgba: BACKG_COLOR
                    Rectangle:
                        pos: self.pos
                        size: self.size

        BoxLayout:
            Label:
                id: question_label
                font_size: self.height/2.2
                color: TEXT_COLOR
                canvas.before:
                    Color:
                        rgba: BACKG_COLOR
                    Rectangle:
                        pos: self.pos
                        size: self.size
                size_hint: (1, 0.6)
            TextInput:
                id: entry
                font_size: self.height/1.5
                foreground_color: TEXT_COLOR
                multiline: False
                halign: 'center'
                size_hint: (1, 0.6)

        BoxLayout:
            spacing: 10
            CustButton:
                text: "7"
                on_press: entry.text += self.text
            CustButton:
                text: "8"
                on_press: entry.text += self.text
            CustButton:
                text: "9"
                on_press: entry.text += self.text
            CustButton:
                text: "+/-"
                font_size: 32
                on_press: entry.text = '-' + entry.text if not entry.text or entry.text[0] != '-' else entry.text[1:]

        BoxLayout:
            spacing: 10
            CustButton:
                text: "4"
                on_press: entry.text += self.text
            CustButton:
                text: "5"
                on_press: entry.text += self.text
            CustButton:
                text: "6"
                on_press: entry.text += self.text
            CustButton:
                text: "C"
                font_size: 32
                on_press: entry.text = ''

        BoxLayout:
            spacing: 10
            CustButton:
                text: "1"
                on_press: entry.text += self.text
            CustButton:
                text: "2"
                on_press: entry.text += self.text
            CustButton:
                text: "3"
                on_press: entry.text += self.text
            CustButton:
                text: "0"
                on_press: entry.text += self.text

        BoxLayout:
            spacing: 10
            Button:
                text: 'Проверить'
                font_size: 64
                background_color: (1, 1, 1, 1)
                background_normal: ''
                color: TEXT_COLOR
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        pos: self.pos
                        size: self.size
                on_press: root.check_answer(entry.text)
            Button:
                text: 'Назад'
                font_size: 64
                background_color: (1, 1, 1, 1)
                background_normal: ''
                color: TEXT_COLOR
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        pos: self.pos
                        size: self.size
                on_press: root.manager.current = 'menu'

<ImageTrueScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Правильно!'
            font_size: 64
            color: TEXT_COLOR
            canvas.before:
                Color:
                    rgba: BACKG_COLOR
                Rectangle:
                    pos: self.pos
                    size: self.size
            size: 200, 200
            size_hint: 1, None

        Image:
            source: 'img/1_4.png'
            size: self.texture_size
            background_color: BUTTON_COLOR
            canvas.before:
                Color:
                    rgba: BUTTON_COLOR
                Rectangle:
                    pos: self.pos
                    size: self.size
            background_normal: ''
            allow_stretch: True
            keep_ratio: True

        Button:
            text: 'Продолжить'
            font_size: 64
            background_color: (1, 1, 1, 1)
            background_normal: ''
            color: TEXT_COLOR
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    pos: self.pos
                    size: self.size
            on_press: root.manager.current = 'game'
            size: 200, 200
            size_hint: 1, None


<ImageFalseScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Неправильно!'
            font_size: 64
            color: 'red'
            canvas.before:
                Color:
                    rgba: TEXT_COLOR
                Rectangle:
                    pos: self.pos
                    size: self.size
            size: 200, 200
            size_hint: 1, None

        Image:
            source: 'img/2_2.png'
            size: self.texture_size
            background_color: BUTTON_COLOR
            canvas.before:
                Color:
                    rgba: BUTTON_COLOR
                Rectangle:
                    pos: self.pos
                    size: self.size
            background_normal: ''
            allow_stretch: True
            keep_ratio: True

        Button:
            text: 'Продолжить'
            font_size: 64
            background_color: (1, 1, 1, 1)
            background_normal: ''
            color: TEXT_COLOR
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    pos: self.pos
                    size: self.size
            on_press: root.manager.current = 'game'
            size: 200, 200
            size_hint: 1, None

